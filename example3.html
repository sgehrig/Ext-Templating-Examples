<!DOCTYPE HTML>
<html>
	<head>
		<meta charset="UTF-8" />
		<title>ExtJS Templating Magic [Example 3]</title>
		<script src="ext-3.3.1/adapter/ext/ext-base.js"></script>
    	<script src="ext-3.3.1/ext-all.js"></script>
    	<link rel="stylesheet" type="text/css" href="ext-3.3.1/resources/css/ext-all.css" />
    	<link rel="stylesheet" type="text/css" href="examples.css" />
    	<script>
Ext.onReady(function() {

	var orderList = [
		{
			"Order":{
				"Id":10326,
				"CustomerId":"BOLID"
			},
			"OrderDetails":[
				{
					"OrderId":10326,
					"ProductId":4,
					"UnitPrice":17.6,
					"Quantity":24,
					"Discount":0
				},
				{
					"OrderId":10326,
					"ProductId":57,
					"UnitPrice":15.6,
					"Quantity":16,
					"Discount":0
				},
				{
					"OrderId":10326,
					"ProductId":75,
					"UnitPrice":6.2,
					"Quantity":50,
					"Discount":0
				}
			]
		},
		{
			"Order":{
				"Id":10801,
				"CustomerId":"BOLID"
			},
			"OrderDetails":[
				{
					"OrderId":10801,
					"ProductId":17,
					"UnitPrice":39,
					"Quantity":40,
					"Discount":0.25
				},
				{
					"OrderId":10801,
					"ProductId":29,
					"UnitPrice":123.79,
					"Quantity":20,
					"Discount":0.25
				}
			]
		},
		{
			"Order":{
				"Id":10970,
				"CustomerId":"BOLID"
			},
			"OrderDetails":[
				{
					"OrderId":10970,
					"ProductId":52,
					"UnitPrice":7,
					"Quantity":40,
					"Discount":0.2
				}
			]
		}
	];

	var template = new Ext.XTemplate(
	'<table>',
		'<tbody>',
		'<tpl for=".">',
			'<tpl for="OrderDetails">',
				'<tr class="{[xindex % 2 === 0 ? "even" : "odd"]}">',
					'<tpl if="xindex == 1">',
						'<th rowspan="{[xcount]}">{parent.Order.Id}</th>',
					'</tpl>',
					'<td>{#}.</td>',
					'<td>Product ID <b>{ProductId}</b></td>',
					'<td><tpl if="UnitPrice &gt; 15"><u>{UnitPrice:usMoney}</u></tpl><tpl if="UnitPrice &lt;= 15">{UnitPrice:usMoney}</tpl></td>',
					'<td>{Quantity}</td>',
				'</tpl>',
			'</tr>',
		'</tpl>',
		'</tbody>',
	 '</table>'
	);

	template.append('content', orderList);
});
    	</script>
	</head>
	<body id="example3">
		<h1>ExtJS Templating Magic [Example 3]</h1>
		<div id="content"></div>
		<div id="footer"><a href="index.html">back</a></div>
	</body>
</html>
